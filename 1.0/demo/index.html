<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>kissy-mscroller的demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/> 
    <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1" media="(device-height: 568px)"/>
    <script src="http://g.tbcdn.cn/kissy/k/1.3.0/kissy-min.js" charset="utf-8"></script>
    <link rel="stylesheet" href="http://g.tbcdn.cn/kissy/k/1.3.0/css/dpl/base-min.css">
    
    <link rel="stylesheet" href="css/pull-to-refresh.css" />
    <style>
        #viewport {
            height: 300px;
        }
        ul {margin: 0}
        .pull {
            opacity: 1;
        }
        .release, .loading {
            opacity: 0;
        }
        .spinner {opacity:0}
    </style>
</head>
<body>
<h2>kissy-mscroller的demo</h2>

<div id="viewport">
<div class="scrollable">
                        <div class="wrap">
                            <ul class="content">
                                <li class="err">Works on</li>
                                <li class="err">touch devices only!</li>
                                <li><strong>Pull here to try</strong></li>
                                <li><a href="http://www.taobao.com">aaaaaaaaaaaaa</a></li>
                                <li>You can't touch this</li>
                                <li>My, my, my music</li>
                                <li>hits me so hard</li>
                                <li>Makes me say "Oh, my Lord"</li>
                                <li>Thank you for blessing me</li>
                                <li>I told you, homeboy</li>
                                <li>You can't touch this</li>
                                <li>Look at my eyes, man</li>
                                <li>You can't touch this</li>
                                <li>My, my, my music</li>
                                <li>hits me so hard</li>
                                <li><a href="javascript:alert(1)">aaaaaaaaaaaaa</a></li>
                                <li>Makes me say "Oh, my Lord"</li>
                                <li>Thank you for blessing me</li>
                                <li>I told you, homeboy</li>
                                <li>You can't touch this</li>
                                <li>Look at my eyes, man</li>
                                <li>You can't touch this</li>
                                <li>My, my, my music</li>
                                <li>hits me so hard</li>
                                <li>Makes me say "Oh, my Lord"</li>
                                <li>Thank you for blessing me</li>
                                <li>I told you, homeboy</li>
                                <li>You can't touch this</li>
                                <li>Look at my eyes, man</li>
                                <li>You can't touch this</li>
                                <li>My, my, my music</li>
                                <li>hits me so hard</li>
                                <li>Makes me say "Oh, my Lord"</li>
                                <li>Thank you for blessing me</li>
                                <li>I told you, homeboy</li>
                                <li>You can't touch this</li>
                                <li>Look at my eyes, man</li>
                                <li>You can't touch this</li>
                                <li>My, my, my music</li>
                                <li>hits me so hard</li>
                                <li>Makes me say "Oh, my Lord"</li>
                                <li>Thank you for blessing me</li>
                                <li>I told you, homeboy</li>
                                <li>You can't touch this</li>
                                <li>Look at my eyes, man</li>
                                <li>You can't touch this</li>
                                <li>My, my, my music</li>
                                <li>hits me so hard</li>
                                <li>Makes me say "Oh, my Lord"</li>
                                <li>Thank you for blessing me</li>
                                <li>I told you, homeboy</li>
                                <li>You can't touch this</li>
                                <li>Look at my eyes, man</li>
                                <li>You can't touch this</li>
                                <li>My, my, my music</li>
                                <li>hits me so hard</li>
                                <li>Makes me say "Oh, my Lord"</li>
                                <li>Thank you for blessing me</li>
                                <li>I told you, homeboy</li>
                                <li>You can't touch this</li>
                                <li>Look at my eyes, man</li>
                                <li>You can't touch this</li>
                                <li>My, my, my music</li>
                                <li>hits me so hard</li>
                                <li>Makes me say "Oh, my Lord"</li>
                                <li>Thank you for blessing me</li>
                                <li>I told you, homeboy</li>
                                <li>You can't touch this</li>
                                <li>Look at my eyes, man</li>
                                <li>You can't touch this</li>
                                <li>My, my, my music</li>
                                <li>hits me so hard</li>
                                <li>Makes me say "Oh, my Lord"</li>
                                <li>Thank you for blessing me</li>
                                <li>I told you, homeboy</li>
                                <li>You can't touch this</li>
                                <li>Look at my eyes, man</li>
                                <li>You can't touch this</li>
                                <li>My, my, my music</li>
                                <li>hits me so hard</li>
                                <li>Makes me say "Oh, my Lord"</li>
                                <li>Thank you for blessing me</li>
                                <li>I told you, homeboy</li>
                                <li>You can't touch this</li>
                                <li>Look at my eyes, man</li>
                                <li>You can't touch this</li>
                                <li>My, my, my music</li>
                                <li>hits me so hard</li>
                                <li>Makes me say "Oh, my Lord"</li>
                                <li>Thank you for blessing me</li>
                                <li>I told you, homeboy</li>
                                <li>You can't touch this</li>
                                <li>Look at my eyes, man</li>
                                <li>You can't touch this</li>
                                <li>My, my, my music</li>
                                <li>hits me so hard</li>
                                <li>Makes me say "Oh, my Lord"</li>
                                <li>Thank you for blessing me</li>
                                <li>I told you, homeboy</li>
                                <li>You can't touch this</li>
                                <li>Look at my eyes, man</li>
                                <li>You can't touch this</li>
                                <li>My, my, my music</li>
                                <li>hits me so hard</li>
                                <li>Makes me say "Oh, my Lord"</li>
                                <li>Thank you for blessing me</li>
                                <li>I told you, homeboy</li>
                                <li>You can't touch this</li>
                                <li>Look at my eyes, man</li>
                                <li>You can't touch this</li>
                                <li>My, my, my music</li>
                                <li>hits me so hard</li>
                                <li>Makes me say "Oh, my Lord"</li>
                                <li>Thank you for blessing me</li>
                                <li><input type="text" height="60" /></li>
                                <li>I told you, homeboy</li>
                                <li>You can't touch this</li>
                                <li>Look at my eyes, man</li>
                                <li>You can't touch this</li>
                                <li>My, my, my music</li>
                                <li>hits me so hard</li>
                                <li>Makes me say "Oh, my Lord"</li>
                                <li>Thank you for blessing me</li>
                                <li>I told you, homeboy</li>
                                <li>You can't touch this</li>
                                <li>Look at my eyes, man</li>
                                <li>You can't touch this</li>
                                <li>My, my, my music</li>
                                <li>hits me so hard</li>
                                <li>Makes me say "Oh, my Lord"</li>
                                <li>Thank you for blessing me</li>
                                <li>I told you, homeboy</li>
                                <li>You can't touch this</li>
                                <li>Look at my eyes, man</li>
                                <li>You can't touch this</li>
                                <li>My, my, my music</li>
                                <li>hits me so hard</li>
                                <li>Makes me say "Oh, my Lord"</li>
                                <li>Thank you for blessing me</li>
                                <li>I told you, homeboy</li>
                                <li>You can't touch this</li>
                                <li>Look at my eyes, man</li>
                                <li>You can't touch this</li>
                                <li>My, my, my music</li>
                                <li>hits me so hard</li>
                                <li>Makes me say "Oh, my Lord"</li>
                                <li>Thank you for blessing me</li>
                                <li>I told you, homeboy</li>
                                <li>You can't touch this</li>
                                <li>Look at my eyes, man</li>
                                <li>You can't touch this</li>
                                <li>My, my, my music</li>
                                <li>hits me so hard</li>
                                <li>Makes me say "Oh, my Lord"</li>
                                <li>Thank you for blessing me</li>
                                <li>I told you, homeboy</li>
                                <li>You can't touch this</li>
                                <li>Look at my eyes, man</li>
                                <li>You can't touch this</li>
                                <li>My, my, my music</li>
                                <li>hits me so hard</li>
                                <li>Makes me say "Oh, my Lord"</li>
                                <li>Thank you for blessing me</li>
                                <li>I told you, homeboy</li>
                                <li>You can't touch this</li>
                                <li>Look at my eyes, man</li>
                                <li>You can't touch this</li>
                                <li>My, my, my music</li>
                                <li>hits me so hard</li>
                                <li>Makes me say "Oh, my Lord"</li>
                                <li>Thank you for blessing me</li>
                                <li>I told you, homeboy</li>
                                <li>You can't touch this</li>
                                <li>Look at my eyes, man</li>
                            </ul>
                        </div>
                    </div>
                </div>

<script>
    var S = KISSY;
    S.Config.debug = true;
    if (S.Config.debug) {
        S.config({
            packages:[
                {
                    name:"gallery",
                    path:'../../../',
                    charset:"utf-8",
                    ignorePackageNameInUri:true
                }
            ]
        });
    }

    S.use('gallery/kissy-mscroller/1.0/index, promise', function (S, KSMScroller, Promise) {
         var scroller = new KSMScroller('.scrollable', {
            scrollingY: true,
            scrollingX: false,
            hasPtr: true,
            
            callback: function () {
                var d = new Promise.Defer(),
                    promise = d.promise;
                var ret = promise.then(function () {
                    var d = new Promise.Defer()
                   setTimeout(function() {
                        d.resolve();      
                    }, 3000); 
                    return d.promise;
               });
               d.resolve();
               
               return ret;
            }
         });
         console.log(scroller)
    })
</script>
</body>
</html>
